@if (isLoading) {
<div class="loading">
    Loading news...
</div>
}

@if (showSections) {
<div class="section-selection">
    <h2>Choose sections</h2>

    <button type="button" (click)="toggleAll()">
        {{ selectAllButtonText }}
    </button>

    <form>
        @for (section of sections; track section.id) {
        <div>
            <label>
                <input type="checkbox" [checked]="selectedSections.includes(section.id)"
                    (change)="toggleSelection(section.id)" />
                {{ section.name }}
            </label>
        </div>
        }
    </form>

    <button type="button" (click)="saveSelection()" [disabled]="selectedSections.length === 0">
        Save
    </button>
</div>
}

@if (!showSections && !isLoading) {
<div class="news-list">
    <h2>Новини по секции</h2>

    @for (item of sectionWithNews; track item.sectionId) {
    <div class="section-block">
        <h3>{{ item.sectionName }}</h3>

        @if (item.news.length === 0) {
        <p class="no-news">No news to show.</p>
        } @else {
        <ul>
            @for (newsItem of item.news; track newsItem.id) {
            <li>
                <h4>{{ newsItem.title }}</h4>
                <p>{{ newsItem.content }}</p>
                <small>Published at: {{ newsItem.publishedAt | date:'medium' }}</small>
            </li>
            }
        </ul>
        }
    </div>
    }
</div>
}